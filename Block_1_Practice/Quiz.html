{{ block title }}{{ endblock }}

{{ block content }}
<link rel="stylesheet" href="{{ static 'css/css.css' }}">
<link rel="stylesheet" href="{{ static 'css/modal.css' }}">
<script type="text/javascript" src="{{ static 'js/Script_modal.js' }}"></script>

<div class="content-box box-neutral">
    <h2 class="section-title">Learning Stage ‚Äì Quiz</h2>
    <hr class="section-divider">

    <!-- Refresh warning
    <div class="section-box box-calm">
        <div class="section-header">
            <div class="icon">‚ö†Ô∏è</div>
            <h3>Please do not refresh</h3>
        </div>
        <p>
            <strong>Refreshing your browser will not stop the timer but will reset your score.</strong>
        </p>
    </div> -->

    <div class="otree-timer_2" style="margin-top: 10px;">
        Time remaining: <span id="time-left"></span> seconds
    </div>

    <div class="section-box box-info">
        <div class="section-header">
            <div class="icon">üìö</div>
            <h3>Quiz Task</h3>
        </div>
    
        {{ include C.Quiz_template_path }}
    </div>

    <!-- Hidden form fields -->
    {% for field in form %}
        {% if field.name not in hidden_fields %}
        <div style="display: none;">
            {{ formfield field.name }}
        </div>
        {% endif %}
    {% endfor %}

    <div style="display: none">
        {% for field in form %}
            {% if field.name in hidden_fields %}
                {{ formfield field.name }}
            {% endif %}
        {% endfor %}
    </div>

    <div class="buttons-container" style="text-align: center; margin-top: 30px;">
        <a id="myBtn" onclick="open_modal(1)" class="btn btn-info">Open Instructions</a>
        <!-- TODO: remove the continue button -->
        <!-- <button id="NextButton" class="btn btn-primary">Continue (debug)</button> -->
    </div>
</div>

<!-- Modal popup for instructions -->
<div id="myModal1" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><span class="icon">üìò</span> Instructions</h2>
            <span class="close" onclick="span_click(1)">&times;</span>
        </div>
        <div class="modal-body">
            {{ include C.Instructions_general_path }}
        </div>
    </div>
</div>


    <script>
        let customTimerEle = document.getElementById('time-left');

        document.addEventListener("DOMContentLoaded", function (event) {
            $('.otree-timer__time-left').on('update.countdown', function (event) {
                customTimerEle.innerText = event.offset.totalSeconds;
            });
        });

    </script>
{{ endblock }}
